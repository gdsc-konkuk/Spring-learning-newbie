# Shineμ Spring ν•™μµ λ―Έμ…

## π—“οΈ Week01

### βοΈ ν•™μµ λ©ν‘

- Query String
- κΈ°μ΄ Spring μ•± μ‹¤ν–‰ λ°©λ²•
- `@RestController` μ–΄λ…Έν…μ΄μ…
- κΈ°λ³Έ DB μ ‘κ·Ό + JDBC κΈ°μ΄
- **Spring Bean λ§›λ³΄κΈ°**

### π“ λ‹µλ³€

#### 2-2) `@RestController` μ–΄λ…Έν…μ΄μ… μ‚΄ν΄λ³΄κΈ°

1. Targetμ μλ―Έλ” ?  
   π‘‰ `@Target` μ–΄λ…Έν…μ΄μ…μ€ ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ„ μ–΄λ””μ— μ μ©ν•  μ μλ”μ§€ μ§€μ •ν•λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤. `@Target`μ— μ„¤μ •ν•  μ μλ” κ°’μ€ `ElementType` μ—΄κ±° νƒ€μ…μ μƒμλ“¤μ…λ‹λ‹¤. μλ¥Ό
   λ“¤μ–΄, `@Target(ElementType.METHOD)`λ” ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ„ λ©”μ†λ“ λ‹¨μ„μ—λ§ μ μ©ν•  μ μλ‹¤λ” κ²ƒμ„
   μλ―Έν•κ³ , `@Target({ElementType.METHOD, ElementType.FIELD})`μ™€ κ°™μ΄ λ°°μ—΄ ν•νƒλ΅ μ—¬λ¬ `ElementType` μƒμλ„ μ§€μ •ν•  μ μμµλ‹λ‹¤. λ§μ•½ `@Target`
   μ–΄λ…Έν…μ΄μ…μ΄ μ—†λ” κ²½μ°μ—λ” λ¨λ“  `ElementType`μ— μ μ© κ°€λ¥ν•©λ‹λ‹¤.  
   `@RestController` μ–΄λ…Έν…μ΄μ…μ— μ μ©λ `@Target` μ–΄λ…Έν…μ΄μ…μ„ μ‚΄ν΄λ³΄λ©΄ `@Target(ElementType.TYPE)`μ΄λΌκ³  μ„¤μ •λΌμμµλ‹λ‹¤. λ”°λΌμ„ `@RestController`
   μ–΄λ…Έν…μ΄μ…μ€ ν΄λμ¤, μΈν„°νμ΄μ¤, μ–΄λ…Έν…μ΄μ… νƒ€μ… λλ” μ—΄κ±°ν•μ—λ§ μ μ©μ‹ν‚¬ μ μμµλ‹λ‹¤.
2. Retentionμ μλ―Έλ” ?  
   π‘‰ `@Retention` μ–΄λ…Έν…μ΄μ…μ€ Javaμ—μ„ λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…μ λΌμ΄ν”„ μ‚¬μ΄ν΄, μ¦‰ ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ΄ μ–Έμ κΉμ§€ μ μ§€λμ–΄μ•Ό ν•λ”μ§€λ¥Ό μ§€μ •ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. Java μ»΄νμΌλ¬μ™€ JVMμ—κ² ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ
   μ²λ¦¬ λ°©λ²•μ„ μ•λ ¤μ£Όλ” κ²ƒμ΄λΌκ³  ν•  μ μμµλ‹λ‹¤.  
   `@Retention` μ–΄λ…Έν…μ΄μ…μ—λ” `RetentionPolicy`λΌλ” `enum` νƒ€μ…μ valueκ°€ μ„¤μ •λλ©° 3κ°€μ§€ κ°’μ„ κ°€μ§ μ μκ² λ©λ‹λ‹¤.

- `SOURCE`: μ–΄λ…Έν…μ΄μ…μ΄ μ†μ¤ νμΌμ—μ„λ§ μ μ§€λκ³  μ»΄νμΌ κ³Όμ •μ—μ„λ” μ κ±°λ©λ‹λ‹¤.  
  ex) `@Override`
- `CLASS`(default): μ–΄λ…Έν…μ΄μ…μ΄ μ»΄νμΌ λ ν΄λμ¤ νμΌμ— ν¬ν•¨λμ§€λ§ λ°νƒ€μ„μ—λ” JVMμ— μν•΄ μ μ§€λμ§€ μ•μµλ‹λ‹¤.
- `RUNTIME`: μ–΄λ…Έν…μ΄μ…μ΄ μ»΄νμΌ λ ν΄λμ¤ νμΌμ— ν¬ν•¨λκ³ , λ°νƒ€μ„μ— JVMμ— μν•΄ μ μ§€λμ–΄ λ¦¬ν”λ ‰μ…μ„ ν†µν•΄ μ•΅μ„Έμ¤ κ°€λ¥ν•©λ‹λ‹¤.  
  ex) `@Deprecated`

3. Controllerμ μλ―Έλ” ?  
   π‘‰ `@Controller` μ–΄λ…Έν…μ΄μ…μ€ Spring MVCμ—μ„ μ»¨νΈλ΅¤λ¬(Controller)λ¥Ό μ •μν•  λ• μ‚¬μ©λλ©°, ν•΄λ‹Ή ν΄λμ¤λ¥Ό μ»¨νΈλ΅¤λ¬λ΅ μ„ μ–Έν•κ³  μ¤ν”„λ§μ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈμ— `Bean`μΌλ΅
   λ“±λ΅ν•©λ‹λ‹¤. μ»¨νΈλ΅¤λ¬λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬ν•κ³ , λ¨λΈκ³Ό λ·°λ¥Ό μ΅°μ‘ν•μ—¬ μ‘λ‹µμ„ μƒμ„±ν•λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.
4. ReponseBodyμ μλ―Έλ” ?  
   π‘‰ `@ResponseBody` μ–΄λ…Έν…μ΄μ…μ€ Spring MVCμ—μ„ ν•Έλ“¤λ¬ λ©”μ†λ“μ λ°ν™κ°’μ„ HTTP μ‘λ‹µ λ³Έλ¬Έ(Body)μ— μ§μ ‘ μ“°λ„λ΅ μ§€μ •ν•λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤. μ¦‰, λ·°(View)λ¥Ό ν†µν•μ§€ μ•κ³  HTTP
   μ‘λ‹µ λ°μ΄ν„°λ¥Ό μ§μ ‘ μƒμ„±ν•  λ• μ‚¬μ©ν•©λ‹λ‹¤.  
   `@RestController` μ–΄λ…Έν…μ΄μ…μ— λ‚΄λ¶€μ μΌλ΅ `@ResponseBody` μ–΄λ…Έν…μ΄μ…μ΄ μ μ©λμ–΄ μκΈ° λ•λ¬Έμ— `@RestController` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ μ»¨νΈλ΅¤λ¬λ“¤μ λ¨λ“  ν•Έλ“¤λ¬ λ©”μ†λ“λ”
   κΈ°λ³Έμ μΌλ΅ `@ResponseBody`κ°€ μ μ©λ κ²ƒ μ²λΌ λ™μ‘ν•©λ‹λ‹¤.

#### 3-1) Dao μ‘μ„±ν•΄λ³΄κΈ°

1. μ–΄λ–¤ μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ•Ό ν• κΉ ?  
   π‘‰ `@Repository` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬ ν•΄λ‹Ή ν΄λμ¤λ¥Ό Spring μ»¨ν…μ΄λ„μ— BeanμΌλ΅ λ“±λ΅
2. μ μ €λ¥Ό μ–΄λ–»κ² μ¶”κ°€ν• κΉ ?  
   π‘‰ `insertUserByName` λ©”μ†λ“μ—μ„ `update` λ©”μ†λ“λ¥Ό μ‚¬μ©ν•μ—¬ νλΌλ―Έν„°λ¥Ό ν†µν•΄ λ„κ²¨ λ°›μ€ μ μ € μ΄λ¦„μΌλ΅ λ°μ΄ν„°(μ μ €) μ‚½μ…
3. μ μ €μ μλ¥Ό μ–΄λ–»κ² μ•μ•„λ‚ΌκΉ ?  
   π‘‰ `countByUserName` λ©”μ†λ“ λ‚΄λ¶€μ—μ„ `queryForObject` λ©”μ†λ“λ¥Ό μ‚¬μ©ν•μ—¬ νλΌλ―Έν„°λ΅ λ„κ²¨ λ°›μ€ μ μ €μ μ΄λ¦„μ„ ν†µν•΄ νΉμ • μ μ €μ λ°©λ¬Έ νμ μ΅°ν

#### 3-2) Controllerμ— Dao μ£Όμ…ν•κΈ°

λ‹¤μ μ½”λ“μ λ¬Έμ μ 

```java

@RestController
public class HelloController {

	private HelloDao helloDao;

	public HelloController(HelloDao helloDao) {
		this.helloDao = helloDao;
	}

	// μƒλµ ...
}
```

π‘‰ μ„ μ½”λ“λ” `final` ν‚¤μ›λ“κ°€ λ¶€μ¬ν•λ‹¤λ” μ μ—μ„ λ§μ€ λ¬Έμ λ¥Ό μ•ΌκΈ°ν•  μ μμµλ‹λ‹¤.  
`final` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•λ©΄ ν•΄λ‹Ή ν•„λ“κ°€ ν• λ² μ΄κΈ°ν™”λλ©΄ λ” μ΄μƒ λ³€κ²½λμ§€ μ•λ”λ‹¤λ” κ²ƒμ„ λ³΄μ¥ν•λ”λ°, μ„μ μ½”λ“λ” `final` ν‚¤μ›λ“κ°€ μ—†μΌλ―€λ΅ `helloDao` ν•„λ“μ μ°Έμ΅°κ°€ λ³€κ²½λ  κ°€λ¥μ„±μ΄ μμΌλ©° μ΄λ”
κ³§ λ²„κ·Έλ΅ μ΄μ–΄μ§‘λ‹λ‹¤.  
λν• λ©€ν‹° μ¤λ λ“ ν™κ²½μ—μ„ `final` ν‚¤μ›λ“κ°€ μ μ©λμ§€ μ•μ€ ν•„λ“λ” λ‹¤λ¥Έ μ¤λ λ“μ—μ„ ν•΄λ‹Ή κ°’μ„ λ³€κ²½ν•  μ μκΈ° λ•λ¬Έμ— λ™μ‹μ„± λ¬Έμ κ°€ λ°μƒν•  κ°€λ¥μ„±μ΄ λ†’μµλ‹λ‹¤.

### β™οΈ κΈ°λ¥ μ”κµ¬ μ‚¬ν•­

- [X] `http://localhost:8080/hello` μ”μ²­ μ‹ 'HelloWorld' λ¬Έκµ¬ μ¶λ ¥ν•κΈ°
- [X] `http://localhost:8080/users?name={name}` μ”μ²­ μ‹ 'Hello {user} {n}λ²μ§Έ λ°©λ¬Έμ…λ‹λ‹¤.' μ¶λ ¥ν•κΈ°
- [ ] `http://localhost:8080/beans` μ”μ²­ μ‹ μ§μ ‘ λ“±λ΅ν• Beanλ“¤μ μ΄λ¦„ λ°ν™ν•κΈ°

### π’ κ°μΈ λ©ν‘

- μ² μ €ν λ¬Έμ„ν™” ν•κΈ°
- λ„λ©”μΈν• ν¨ν‚¤μ§€ κµ¬μ΅° μµμ™ν•΄μ§€κΈ°
- Angular μ»¤λ°‹ μ»¨λ²¤μ… μµμ™ν•΄μ§€